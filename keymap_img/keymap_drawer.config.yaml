# Configuration for keymap-drawer, using the advanced `parse_config` method.
# This approach is better suited for ZMK and allows for more detailed key representations.

# Contains settings used by the `draw` step, like styling and icon sources.
draw_config:
  svg_extra_style: |
    svg.keymap {
      background-color: #fdfdfd;
      font-family: "Inter", "Helvetica Neue", Arial, sans-serif;
    }

    /* Default keys */
    rect.key {
      fill: #f6f8fa;
      stroke: #d0d7de;
      stroke-width: 1;
      rx: 6; /* rounded corners */
    }

    /* Text inside keys */
    text {
      fill: #24292e;
      font-size: 12px;
    }

    /* Held keys (when you press and hold) */
    rect.held, rect.combo.held {
      fill: #c8e1ff;
      stroke: #1d76db;
    }

    /* Combo keys */
    rect.combo {
      fill: #e1e4e8;
      stroke: #b1bac4;
    }

    /* Layer toggle / layer-tap keys */
    rect.layer {
      fill: #fff5b1;      /* soft yellow background */
      stroke: #d4b106;    /* gold border */
      stroke-width: 1.5;
    }
    rect.layer.held {
      fill: #ffe58f;      /* stronger yellow when held */
      stroke: #d48806;
    }

    /* On the NUM layer, highlight the NUM key (pos 31) */
    svg.layer-NUM .key-31 rect.key {
      fill: #d0f0c0;      /* light green fill */
      stroke: #5dbb63;    /* stronger green border */
    }

    /* On the SYM layer, highlight the SYM key (pos 34) */
    svg.layer-SYM .key-34 rect.key {
      fill: #d0f0c0;
      stroke: #5dbb63;
    }

    /* On the FUNC layer, highlight BOTH the NUM (31) and SYM (34) keys */
    svg.layer-FUNC .key-31 rect.key,
    svg.layer-FUNC .key-34 rect.key {
      fill: #d0f0c0;
      stroke: #5dbb63;
    }

    /* Keys with icons look a little bigger */
    .glyph {
      width: 20px;
      height: 20px;
    }
  glyph_urls:
    mdi: https://raw.githubusercontent.com/Templarian/MaterialDesign-SVG/master/svg/{}.svg
  use_local_cache: true
  glyph_tap_size: 18
  glyph_hold_size: 15
  glyph_shifted_size: 15

# Contains settings used by the `parse` step, including detailed ZMK binding maps.
parse_config:
  raw_binding_map:
    # Layers and Layer Taps
    "&lt NUM DEL": { tap: $$mdi:backspace-reverse-outline$$, hold: NUM  }
    "&lt SYM BSPC": { tap: $$mdi:backspace$$, hold: SYM  }
    "&mo FUNC": { tap: FUNC, type: momentary }

    # Homerow Mods
    "&hm LGUI S": { tap: S, hold: $$mdi:apple-keyboard-command$$ }
    "&hm LCTRL D": { tap: D, hold: $$mdi:apple-keyboard-control$$ }
    "&hm LSHFT F": { tap: F, hold: $$mdi:apple-keyboard-shift$$ }
    "&hm RSHFT J": { tap: J, hold: $$mdi:apple-keyboard-shift$$ }
    "&hm RCTRL K": { tap: K, hold: $$mdi:apple-keyboard-control$$ }
    "&hm RGUI L": { tap: L, hold: $$mdi:apple-keyboard-command$$ }

    # Tap Dances
    "&copy_dance": { tap: C, shifted: $$mdi:content-copy$$ }
    "&paste_dance": { tap: V, shifted: $$mdi:content-paste$$ }
    "&dot_spc": { tap: '.', shifted: $$mdi:keyboard-space$$ }
    "&caps_dance": { tap: T, shifted: $$mdi:apple-keyboard-caps$$ }

    # Hold-Taps (Non-homerow)
    "&mt RALT BSPC": { tap: $$mdi:backspace$$, hold: Alt }
    "&tp LG(LC(LA(LSHFT))) TAB": { tap: $$mdi:keyboard-tab$$, hold: Hyper }
    "&tp LG(LC(LA(LSHFT))) ESC": { tap: $$mdi:keyboard-esc$$, hold: Hyper }

    # Bluetooth Keys
    "&bt BT_CLR": $$mdi:bluetooth-off$$
    "&bt BT_NXT": $$mdi:bluetooth-transfer$$
    "&bt BT_PRV": $$mdi:bluetooth-transfer$$
    "&bt BT_SEL 0": { hold: 1, shifted: $$mdi:bluetooth-connect$$ }
    "&bt BT_SEL 1": { hold: 2, shifted: $$mdi:bluetooth-connect$$ }
    "&bt BT_SEL 2": { hold: 3, shifted: $$mdi:bluetooth-connect$$ }

    # System Keys
    "&sys_reset": "Reset"
    "&bootloader": "Boot"

    # Media Keys
    "&kp C_PP": $$mdi:play-pause$$
    "&kp C_MUTE": $$mdi:volume-off$$
    "&kp C_VOL_DN": $$mdi:volume-low$$
    "&kp C_VOL_UP": $$mdi:volume-high$$
    "&kp C_NEXT": $$mdi:skip-next$$
    "&kp C_PREV": $$mdi:skip-previous$$

    # Mouse Keys
    "&mkp LCLK": $$mdi:mouse-left-click-outline$$
    "&mkp RCLK": $$mdi:mouse-right-click-outline$$
    "&mkp MCLK": $$mdi:mouse-scroll-wheel$$
    "&mmv MOVE_LEFT": { tap: $$mdi:menu-left$$, shifted: $$mdi:mouse$$ }
    "&mmv MOVE_RIGHT": { tap: $$mdi:menu-right$$, shifted: $$mdi:mouse$$ }
    "&mmv MOVE_UP": $$mdi:mouse-move-up$$
    "&mmv MOVE_DOWN": $$mdi:mouse-move-down$$
    "&msc SCRL_UP": { tap: $$mdi:pan-up$$, shifted: $$mdi:mouse-scroll-wheel$$ }
    "&msc SCRL_DOWN": { tap: $$mdi:pan-down$$, shifted: $$mdi:mouse-scroll-wheel$$ }

    # Macros (assign simple text/icons)
    "&dq_macro": '""'
    "&homeapp": $$mdi:keyboard-settings$$
    "&nomachine": $$mdi:gnome$$
    "&lt_gt_macro": "<>"
    "&lb_rb_macro": "{}"
    "&lp_rp_macro": "()"
    "&ls_rs_macro": "[]"

    # Combos
    "&vim_wq": "Vim WQ"
    "&vim_q": "Vim Q!"

    # Browser navigation
    "&kp LG(LEFT)": $$mdi:arrow-left-bold-box-outline$$
    "&kp LG(RIGHT)": $$mdi:arrow-right-bold-box-outline$$

  # Use the default ZMK keycode mapping for standard keys
  zmk_keycode_map:
    TRANS: ▽
    _______: ▽
    K_TRANS: ▽
    UNDER: '_'
    STAR: '*'
    PLUS: '+'
    BSLH: '\'
    PIPE: '|'
    HASH: '#'
    DLLR: '$'
    AT: '@'
    TILDE: '~'
    GRAVE: '`'
    PRCNT: '%'
    EXCL: '!'
    AMPS: '&'
    CARET: '^'
    EQUAL: '='
    MINUS: '-'
    SLASH: '/'
    FSLH: 
      tap: '/'
      shifted: '?'
    COMMA: 
      tap: ','
      shifted: '<'
    DOT: 
      tap: '.'
      shifted: '>'
    SEMI: 
      tap: ';'
      shifted: ':'
    LT: '<'
    GT: '>'
    LBKT: '['
    RBKT: ']'
    LBRC: '{'
    RBRC: '}'
    LPAR: '('
    RPAR: ')'
    DQT: '"'
    SQT: ''''
    LGUI: $$mdi:apple-keyboard-command$$
        # Arrow keys
    UP: $$mdi:arrow-up-bold$$
    DOWN: $$mdi:arrow-down-bold$$
    LEFT: $$mdi:arrow-left-bold$$
    RIGHT: $$mdi:arrow-right-bold$$
