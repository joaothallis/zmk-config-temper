# Configuration for keymap-drawer, using the advanced `parse_config` method.
# This approach is better suited for ZMK and allows for more detailed key representations.

# Contains settings used by the `draw` step, like styling and icon sources.
draw_config:
  append_colon_to_layer_header: true
  arc_radius: 6.0
  arc_scale: 1.0
  combo_h: 26.0
  combo_w: 28.0
  inner_pad_h: 2.0
  inner_pad_w: 2.0
  key_h: 56.0
  key_rx: 6.0
  key_ry: 6.0
  key_w: 60.0
  line_spacing: 1.2
  outer_pad_h: 56.0
  outer_pad_w: 30.0
  small_pad: 2.0
  split_gap: 30.0
  svg_style: |
    /* font and background color specifications */
    svg {
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;
        font-size: 14px;
        font-kerning: normal;
        text-rendering: optimizeLegibility;
        fill: #24292e;
    }

    /* default key styling */
    rect {
        fill: #f6f8fa;
        stroke: #c9cccf;
        stroke-width: 1;
    }

    /* color accent for combo boxes */
    rect.combo {
        fill: #cdf;
    }

    /* color accent for held keys */
    rect.held, rect.combo.held {
        fill: #fdd;
    }

    /* color accent for ghost (optional) keys */
    rect.ghost, rect.combo.ghost {
        fill: #ddd;
    }

    text {
        text-anchor: middle;
        dominant-baseline: middle;
    }

    /* styling for layer labels */
    text.label {
        font-weight: bold;
        text-anchor: start;
        stroke: white;
        stroke-width: 2;
        paint-order: stroke;
    }

    /* styling for combo tap, and key hold/shifted label text */
    text.combo, text.hold, text.shifted {
        font-size: 11px;
    }

    text.hold {
        text-anchor: middle;
        dominant-baseline: auto;
    }

    text.shifted {
        text-anchor: middle;
        dominant-baseline: hanging;
    }

    /* styling for hold/shifted label text in combo box */
    text.combo.hold, text.combo.shifted {
        font-size: 8px;
    }

    /* styling for combo dendrons */
    path {
        stroke-width: 1;
        stroke: gray;
        fill: none;
    }
  glyph_urls:
    mdi: https://raw.githubusercontent.com/Templarian/MaterialDesign-SVG/master/svg/{}.svg
  use_local_cache: true
  glyph_tap_size: 18
  glyph_hold_size: 15
  glyph_shifted_size: 15
  
# Contains settings used by the `parse` step, including detailed ZMK binding maps.
parse_config:
  mark_alternate_layer_activators: true
  raw_binding_map:
    # Layers and Layer Taps
    "&lt NUM DEL": { tap: $$mdi:backspace-reverse-outline$$, hold: NUM, type: hold-tap }
    "&lt SYM BSPC": { tap: $$mdi:backspace$$, hold: SYM, type: hold-tap }
    "&mo FUNC": { tap: FUNC, type: momentary }

    # Homerow Mods
    "&hm LGUI S": { tap: S, hold: $$mdi:apple-keyboard-command$$ }
    "&hm LCTRL D": { tap: D, hold: $$mdi:apple-keyboard-control$$ }
    "&hm LSHFT F": { tap: F, hold: $$mdi:apple-keyboard-shift$$ }
    "&hm RSHFT J": { tap: J, hold: $$mdi:apple-keyboard-shift$$ }
    "&hm RCTRL K": { tap: K, hold: $$mdi:apple-keyboard-control$$ }
    "&hm RGUI L": { tap: L, hold: $$mdi:apple-keyboard-command$$ }

    # Tap Dances
    "&copy_dance": { tap: C, shifted: $$mdi:content-copy$$ }
    "&paste_dance": { tap: V, shifted: $$mdi:content-paste$$ }
    "&dot_spc": { tap: '.', shifted: $$mdi:keyboard-space$$ }
    "&caps_dance": { tap: T, shifted: $$mdi:apple-keyboard-caps$$ }

    # Hold-Taps (Non-homerow)
    "&mt RALT BSPC": { tap: $$mdi:backspace$$, hold: Alt }
    "&tp LG(LC(LA(LSHFT))) TAB": { tap: $$mdi:keyboard-tab$$, hold: Hyper }
    "&tp LG(LC(LA(LSHFT))) ESC": { tap: $$mdi:keyboard-esc$$, hold: Hyper }

    # Bluetooth Keys
    "&bt BT_CLR": $$mdi:bluetooth-off$$
    "&bt BT_NXT": $$mdi:bluetooth-transfer$$
    "&bt BT_PRV": $$mdi:bluetooth-transfer$$
    "&bt BT_SEL 0": { hold: 1, shifted: $$mdi:bluetooth-connect$$ }
    "&bt BT_SEL 1": { hold: 2, shifted: $$mdi:bluetooth-connect$$ }
    "&bt BT_SEL 2": { hold: 3, shifted: $$mdi:bluetooth-connect$$ }

    # System Keys
    "&sys_reset": "Reset"
    "&bootloader": "Boot"

    # Media Keys
    "&kp C_PP": $$mdi:play-pause$$
    "&kp C_MUTE": $$mdi:volume-off$$
    "&kp C_VOL_DN": $$mdi:volume-low$$
    "&kp C_VOL_UP": $$mdi:volume-high$$
    "&kp C_NEXT": $$mdi:skip-next$$
    "&kp C_PREV": $$mdi:skip-previous$$

    # Mouse Keys
    "&mkp LCLK": $$mdi:mouse-left-click-outline$$
    "&mkp RCLK": $$mdi:mouse-right-click-outline$$
    "&mkp MCLK": $$mdi:mouse-scroll-wheel$$
    "&mmv MOVE_LEFT": { tap: $$mdi:menu-left$$, shifted: $$mdi:mouse$$ }
    "&mmv MOVE_RIGHT": { tap: $$mdi:menu-right$$, shifted: $$mdi:mouse$$ }
    "&mmv MOVE_UP": $$mdi:mouse-move-up$$
    "&mmv MOVE_DOWN": $$mdi:mouse-move-down$$
    "&msc SCRL_UP": { tap: $$mdi:pan-up$$, shifted: $$mdi:mouse-scroll-wheel$$ }
    "&msc SCRL_DOWN": { tap: $$mdi:pan-down$$, shifted: $$mdi:mouse-scroll-wheel$$ }

    # Macros (assign simple text/icons)
    "&dq_macro": '""'
    "&homeapp": $$mdi:keyboard-settings$$
    "&nomachine": $$mdi:gnome$$
    "&lt_gt_macro": "<>"
    "&lb_rb_macro": "{}"
    "&lp_rp_macro": "()"
    "&ls_rs_macro": "[]"

    # Combos
    "&vim_wq": "Vim WQ"
    "&vim_q": "Vim Q!"

    # Browser navigation
    "&kp LG(LEFT)": $$mdi:arrow-left-bold-box-outline$$
    "&kp LG(RIGHT)": $$mdi:arrow-right-bold-box-outline$$

  # Use the default ZMK keycode mapping for standard keys
  zmk_keycode_map:
    TRANS: ▽
    _______: ▽
    K_TRANS: ▽
    UNDER: '_'
    STAR: '*'
    PLUS: '+'
    BSLH: '\'
    PIPE: '|'
    HASH: '#'
    DLLR: '$'
    AT: '@'
    TILDE: '~'
    GRAVE: '`'
    PRCNT: '%'
    EXCL: '!'
    AMPS: '&'
    CARET: '^'
    EQUAL: '='
    MINUS: '-'
    SLASH: '/'
    FSLH: 
      tap: '/'
      shifted: '?'
    COMMA: 
      tap: ','
      shifted: '<'
    DOT: 
      tap: '.'
      shifted: '>'
    SEMI: 
      tap: ';'
      shifted: ':'
    LT: '<'
    GT: '>'
    LBKT: '['
    RBKT: ']'
    LBRC: '{'
    RBRC: '}'
    LPAR: '('
    RPAR: ')'
    DQT: '"'
    SQT: ''''
    LGUI: $$mdi:apple-keyboard-command$$
    LNLCK: 'Num Lock'
    # Arrow keys
    UP: $$mdi:arrow-up-bold$$
    DOWN: $$mdi:arrow-down-bold$$
    LEFT: $$mdi:arrow-left-bold$$
    RIGHT: $$mdi:arrow-right-bold$$

  layer_overrides:
   NUM:
     3:       # bottom row (0-indexed)
       1:     # second key in that row
         type: held
   SYM:
     3:
       4:
         type: held
   FUNC:
     3:
       1:
         type: held
       4:
         type: held
